# Automatically generated on 2020-09-07 UTC from https://codemagic.io/app/5f55e953e2db27b5365a8de4/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        CM_KEYSTORE: Encrypted(Z0FBQUFBQmZWZlF0Rmx0SlE3QUNPZ2NWRmJGWXhqbkZ0SFBqMno2d09xa1VfcWdfZklZZ3dfRG1RNDBHRFNFWEk0S2RMU05UdjNwVjRaZUFPMWlRY2FwLWo2U0I3bF8yUFIxQjV2NUN0eWlqVE53ZERuZHY3ZjNVS2djUXUzTWZiZXVhZlFrcTRiSzNKQlRFT0Nvemo5OVhkRWg5d3hzaHcyR2cxZkt0dnFtcXdPVG5ndnRXVU83MjB2akpiTVFwUWg0aWdFV1JNd2pHSW0tS0dOLXM5bHhuWGwyTlYzUU5wVmdxcVROQU42eUgwdlJnRnRtdVk4eW43bkQxdElTd2l1aDlwNmt5bzRFS05EZWJGR0ZleFp4RWlYZENocl9MRXBFcGhrdXFVaDlLc3NHQVB1S2kxS0VGbHlGYlUzX3RoOUt3dll5MzdsREpuai1tb3VRdDB1RGJGWm5xREZ1Mk96ZEdpRWhGVDRLWExqdWFsNGpYd2pxQlI5c2hHc0hqdHVraFFSdDllcFBaOGF6RmlnOU5VMElMNUE0WGJlbWF3bUVHV0hXRW5WU1V1UllEUjZrTklRSXJJYkxNQl9FSTByVklvbWF2MDZ3b2laQjh3Q2hLQ3d0QW8xNk5hVnNtX1dpT05jM3lMVGVrTkJMRE56VFJ1U3BtTFQ1dUN1SHc1Z2EweEpxSkpmamIzUEphSFdwczVBMWY2dkN0MjRaVUtqMkRHVlJjOHZqUXNXLTEzOWxfWFFtVjNXSGo3WUFKUVlWR2hCMHkwa1ZpSXROSDFmVjVVTWtPaFFyMnhFX2wzdkJMNS1oS0xEWGRRN1hZVDRSdUJDcC1YX09MRE5LRzhUWGNtcmlnLXl6TnJHZnpqMnRQQmV0eTNtNlNoTWNZTjB3N1RxeEtLSG5ld0J0N0hWQVJJRS1VUVNlNElieUVlNDI1ZmZVQ2I0cEZ2TVphLTFYM0piMHVrbmdSSU5oRFk2Y01Wd1VrZTdEZ1R2YWU0bmF5Sm9XdW1yME1zejAtQ0NWQWRuT285WVBEVTd0UjRBeldOLU1uQTZ3UGhUaUEwRHdibWR5SktzSUMwLXR1WHhaY2NEX0p3MVo2Sm5IQ3djWTlfUzF1d2FqajhDQzFaRzlKajdHTkRaQjhJZ0g4ZTJtTVBmXzdzYUNRcHZjUjBHVWVPSHRrZ3kyaEVMb2FXZVpKQnRBU0l0anlKZGlOLW9aSzlrQmhZQmpOZkRnUlQ2U1dWMUVDNmhIczhQM3lPYTZaLTNFZWhYUFcxQ3Y2REhsdFprV2M2bHA5el83cE5YZHVRRXNkanpjRktwUG5MVlFtU0dDMVIzVzFrdDJCOElJaUJlclNDQW5IUVIwbWFYUmpfbjAyeFJScHowOHU3MDE4UDRrN296TzkzNDZDY3BkTFBsZWpFZ1A1eFJoOUdrWmZOQjZ3VTN2akR1M2R4YlFzOEhlc1BaQkR6MW1pRWVCUnpqMUdhNHZJZ1BZamE3T3RsREM0YlNlWmkzdm5CVmdBamlsYngyOGFhcDhtM3FjVzZkVVYxTHJndjlUOTNZZTNoMS03ajNWZWx2ZU9Dc1c1Rlc4Q01jMVl6MVVvOWtIZ1hmS3Y4QWRTQlZrMEpVNVNES2hHRG1lZlZCY2NoM09GLUxVRkNLdWg4NzUzZElxcVFRMVlWdVRJZTY4OWZHOEpLcnVuQkN2c0pHR1NXTElVR1ZjMm1udlBmMGhfdTdQS0ktb1BfSUFqd3Rfc0V3aVotalRBRDFJZzRrMHhla28xZWRGc2otLXZwZ3N5V2xZeDYzMnp3RHZ4a3pUdG1VQUtPQVI2SDUwN0p3NXFyazd2ZFd0T0NoTkhkSzI3eUNnS2lZY28tR0QwTnNXLUZrMzZqWEJJamN2R1NnVGZTQUhIQV9FSW5Tc2ZYbFFjZllpN2JORDNPdTRRb1NzQ05Rd2pPU3Y2VE1SYjNvYUQ5UWZ1LTdZQnZMLVVBSjhIU19iWjBTblRRNUNhNzVUY2dYZmNzT0dfaEtnc1ROVWxFeWJManFnVkFDRVF3Rm9pZDE3Ui1IcmlROG4ySkZEUEpibnVseHVNaE9iQnNhUVN1NEUxZ2ZxSTl5OThlUzFVTHFfQkpRaTlyVFhTVTB1VDl6NlRaS1J4VXh4X2tPN1JvLUEtVV9vVHlXZHRtTVZ0TldLRmR5dTZzcVNhNEFOc2RQUHNzaWN1MWJuME5sSjd4X3BQX1kwREdfWGk3MTNIWVB6bkRvVXJSNUduOGl4dHZJdzZSVVptME9oQlJxWjJQeC1ycW5aTHFNWUFMaG5ZZEJsbjNDRlZwampEQW10YWhjeUpjN3R0V2NNbGI1eENzWXVHMFl5OURxMEVNSk5hQmJuZ1NlSllNYXhFVnZ4a3BTUV9VY250NDlwS3NFMHczSHZHNk9vZFhPS2hjNkJIYWZhODRJUjU4aFlCQ3k1alYwWTAwa081Qk1WcHI2eXZuV2I3SHNlMDU4Y1B2b2Vqem9sbFF5Z2pVZ2JHNTI3cE8xVURQbnBPUXJNbVgtSTZTSWNhTU5QaEtCVTV2dHNmamhXOVEzUmJsc2JHWHQwb01JNnprOUN3VmR0YVJDSnBfakx0VmpwbGZDWDRBV0tqM0JJaS1sOTdyVkFQNU9NQzNPbzRTbUFuMi1YNllfNTAtQVJoWC1fbm5Qc1ltdDB1bDlDYjRrSlNBZVVWNDkycTMwN29yM1FfZU93Q0djQnB0T0FzUWFBOEFVYmFvOER2djB0Y3U1dm9ybkxNMkdVT3gyT1cwTUR6MVN0RHpTZlNSdHlydHBQRml6cTVMTFNIaXl0ZlBRQnE1YldLQXl4VFlkeldQT2k4R1F5Q29neHFpUHhNTmVwX1kzanJnVEh3ZVpNV3ItanBiTVktSVdQMndUNlF4eWNqQ2p1UUh5clM5WEJWbGFWRjRmWTFHemtNZ2p3aWFFdGJQdjNmLWdoempDTVVwTkxYWWhnM0VpdzZDM0tsWE9rTFQ5SVZxRFdaUGE4S0FaUldBSGxXYU9BZm9PSmNyV2hZUG4xR1RyTmt1VHJpNm1HVW5PUGk0Z0tpTUJ4N1AyMlFXSnJBNGw1dmZlTXVKdzc1RnNxYllrdjBOLUs5VWlCZFN5MFN3Ni1QR1VqOHB0cUxkUjdOQ3ExdGpTNDZHSUJDTjREbzR6WnByMUJoMm5Bb0cxRkxNOHM2aEZ5N2J3UHc1c0RvTEljZnJ2ZVFtOElnN0FrWFY4NmpXYjRRblhPQmV6anVSMkhNQ3dEZkdoQnJpbkRnbGpjdDlzRnQ1V0JKRFdoYzdnZDNKQVlBMTZMRnZha0loeTFUVXlvQzJRWUhsNXpmUG9faFplVlZyUlN5RXc4TUkyQmVHT29aV0pDSUdrUzIxYVlzYTdGcWZrc2h0MjJsY0hkZVVtSUFIOGVxNS1FdnhQUWRhNFJyaEtUS0d2RkFWUnlpOXQ3MWZySWVGQUhHUldmU2lBckJZTWEtZ01qYzk2ajZqY0pZNHllVThKQkUwV3I1NzRIaHM5NldweC1YQXV2R3NkekVzZUIxckhMY0Rlem95bVZ5SzhsY045WHFzb0d4eDFvMTJUR1ItRmpfTk5uQ2JseHRoMDJnYlFDM29aVGZPWVBtVlhCdjZ1WC0tZFhja3ZzV0dLRWxpNGNoRklhUEQ3WUt2Q1B2dmVBdEFuMF9BSUNmb29ZS1NwT3lFSG5kb3J0NENmcXBQd0ZzbmlPb0U1YmpielotQmE0M0lwLUkxVGpDbTUxNmtZREN1aTdTRVZoaGNrM2doUDhIUF9RV0VwemlsMzVoTHViWkVGV2dQdW9EaGJqbjNNZV9PX1ZONWFLT2w4RmZlc2tUODFVN2ltcUlROTZad2hqSmRkQnp2ZHYyNzJKVkViWlRiN0RlQzUzbllISUgwTjM5dV82aXVTSFVIZXM4RFFNREFPOE5HY21EU3pGanoySU9mNVpPREFsY0NfMnJPMVVUcDZ1UGdRakJsejd3R1VuZ0h4YUJ3aDFuWVo0THo1ZHlGdDk0RlA0RG82bW5kX0ZNb0ZBM2tFTF83dkRScmtUZVVBZTRzT0ZXZ2ZBT1hIZkpjbG1RMnNMcEpwM1JIdmxDMkRIQkRwbUlSZ1hYUGhlWWd5ZUQ0SXd5TEZLbm1mMDZnZVh4T29GdmdiWlc5N2dfcUNQSjZSRlBjRFBGX3dST29QbEZNQWRuVGdDaEswd0VZZmVGSl9ZQ1dBbEhrbGpkVkZrZEFZMC1EUEZodXk0QW9xcUlZaVZRQkNPTUlZTUtja1dYamNGUE4xNjlmOGhjdkhETE9KcTk4eVZ4THlqclBsV09sVHdWaTY3M0R3N21ja0lZWjlqcU1BMDFqdnRRVkVDQmxLVjZTOEhRUllDcWlmOURiM0VTQlYyYVYwNXk5WWVDVUMxQ3BaQTkweURBY1JoNlM0Mk5MN2N5QlktZmRsZjUzejVBRUpTZ3N6U3c2b3l1LVE1RmRCN0xLR3hQUUNuQTN1cjVRcm52aU1nZmVkbnZDc1ZVRHowbEViZ1BIZVk5ODQxNEwxM1poTGhyR01tV1o3cTUtaXBqOFJPdExJS2Vub1JPOHBFUnMwZGhySTJYZWFnZWVDNE1NcW1fbUdFYjh1aTRzYnBKU1Bjdno1NHVvLVpOeDkwX0xVbFNDX01sRDdDWjM1QjBDdks1TnpPWXNqX3EyWUFTbUlMTmN6QjI1LVVmRU5PclZSc2szU1hHS1ppQ2M0bWpKZktqRG53WGNLTXNQSmlobGdyLXJ3YkdkYlFDMkJZOElwc2NDcmZBN0JQVUp3TzBiS0tZa09hQnAtWkFEWmhaV1lGNVVYRllMX01UZlpMUG5TOHNKdkdBMUZ0ZmFRWC1KaHVrNDl1Vnh2RjJ6eXh1UnJIWXh0bkRwNk84SG0tR2tJYXEwREwxcUQtemNJN3dsMUVxTENWTzdRR2ExcVY5djRLZ3lyWUdqdTFCV0JEWUUyTjZIbExuemozOTJKcTZLWVBCMTF2bW85MDZLOHRXc2tZc2JSVGYzTXh2MUhZbDYtMWxVdG8zSlJPTjljbHB1a015WEdyNXdOelRnWUctZEx4bk9JNndiNkNEWFVBPQ==)
        CM_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmZWZlF0LWZGU0tSalRhdDhMRU84M3AwcENpLUR2OVhvdUxnQXJEOUxvcGVOcGpYbV9qMFQ0UmVvRHZmZEdQVEtTVGt0UXdIS2Q1RGk1RzBxcC1wQ1Z3QnRJbVE9PQ==)
        CM_KEY_ALIAS_PASSWORD: Encrypted(Z0FBQUFBQmZWZlF0TEV3OVhUXzlUbWY0WVR4cFNaNU1BX2dDLVJKYllRZmJ4NHhhdGpjUDV4dzRhV3FYUDFoTzNfR2VvSWFiOWMxUjlTVTBmSWtwR0hqdlFOcnp5WjUzaVE9PQ==)
        CM_KEY_ALIAS_USERNAME: Encrypted(Z0FBQUFBQmZWZlF0MFp3d2k1QnpST2oyR3hEa09lZmxZUm1SUXV1dmhHa1Ayb3dlZVRteHlOV3JITzg0OWFnWEtsVGs0a1czazVUQkJNQlA2NWZfeGo2Y1dxTHRVa0tlM0E9PQ==)
      flutter: stable
      xcode: latest
      cocoapods: default
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*'
          include: true
          source: true
    scripts:
      - |
        # set up key.properties
        echo $CM_KEYSTORE | base64 --decode > /tmp/keystore.keystore
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$CM_KEYSTORE_PASSWORD
        keyPassword=$CM_KEY_ALIAS_PASSWORD
        keyAlias=$CM_KEY_ALIAS_USERNAME
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - cd . && flutter packages pub get
      - cd . && flutter build appbundle --release
      - find . -name "Podfile" -execdir pod install \;
      - cd . && flutter build ios --release --no-codesign
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - mhadeer95@yahoo.com
